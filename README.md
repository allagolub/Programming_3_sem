# Programming_3_sem
## Контест 1. Строки.
## [Задача A](solutions/A_1.cpp)
Дана непустая строка S, длина которой N не превышает 10^6. Будем считать, что элементы строки нумеруются от 0 до N-1.

Для каждой позиции i символа в строке нас будет интересовать подстрока, заканчивающаяся в этой позиции, и совпадающая с некоторым началом всей строки.

Вообще говоря, таких подстрок будет несколько, не меньше двух. Самая длинная из них имеет длину i + 1, она нас интересовать не будет. А будет нас интересовать самая длинная из остальных таких подстрок (заметим, что такая подстрока всегда существует — в крайнем случае, если ничего больше не найдется, сгодится пустая подстрока).

Значением префикс-функции  будем считать длину этой подстроки. Префикс-функция используется в различных алгоритмах обработки строк. В частности, с её помощью можно быстро решать задачу о поиске вхождения одной строки в другую («поиск образца в тексте»).

Требуется для всех i от 0 до N-1 вычислить префикс-функцию.

## [Задача B](solutions/B_1.cpp)
Дана префикс-функция некоторой строки. Найти лексикографически минимальную строку,
массив префикс-функции которой совпадет с данным. Алфавит для построения ответа: a-z.

## [Задача C](solutions/C_1.cpp)
Построить Z-функцию

## [Задача D](solutions/D_1.cpp)
Дана Z-функция некоторой строки. Найти лексикографически минимальную строку,
массив Z-функции которой совпадет с данным. Алфавит для построения ответа: a-z.

## [Задача E](solutions/E_1.cpp)
Найти все вхождения строки P в строку S

## [Задача F](solutions/F_1.cpp)
Подсчитайте число различных подстрок строки S.

## [Задача G](solutions/G_1.cpp)
Третий день не встает Иван с печи. Все ему надоело: и балалайка, и водка.

— Так больше нельзя — сказал себе Иван, взял револьвер, надел валенки и ушел, хлопнув дверью.

— Здравствуй, Ваня! С чем пожаловал? — сказал ручной медведь Миша, увидев перед собой хмурого Ивана, стоящего на пороге его берлоги.

— Я хочу сыграть с тобой в одну игру — сказал Иван, достав револьвер из-за пазухи. Миша молча сел за стол. Иван приблизился к столу.

— Вращай! — сказал он и дал пистолет в лапы медведю.

Медведь увидел перед собой револьвер неизвестной модели с вращающимся барабаном. В некоторые пазы были вставлены пули. Все пазы видны, кроме одного — основного, из которого в ствол подается пуля. Медведь крутанул барабан.

— Что дальше? — спросил Миша.

— Стреляй. Либо в себя, либо в меня.

Медведь был очень предан своему хозяину, поэтому не мог его убить. Медведь снова глянул на барабан и захотел вычислить,
будет ли сейчас произведен выстрел. Ведь от этого зависит его дальнейшая судьба...
Первая строка содержит целое число n (2 ≤ n ≤ 2 ⋅ 106 ) — количество пазов в барабане револьвера.

Во второй строке задана строка a, описывающая состояние барабана револьвера до вращения.

Строка состоит из n − 1 символа, где ai = 0, если в i-м пазе по часовой стрелке, начиная от дула, нет пули, и ai = 1, если есть.

В третьей строке задана строка b, описывающая состояние барабана револьвера после вращения в таком же формате.

Гарантируется, что входные данные непротиворечивы.

## [Задача H](solutions/H_1.cpp)
Шрек и Кот в сапогах наконец-то нашли общий язык и теперь мучают Осла новыми каламбурами. Схема очень проста и именно поэтому просто невыносима -
n
n слов склеиваются в одно, по следующему правилу: если два слова идут подряд, то удаляется самый длинный префикс второго слова, который совпадает с суффиксом первого слова. Например, слова "каламбур" и "буря" склеиваются в "каламбурю" (грозящую погрести под собой Осла). Каламбур склеивается слева направо (т.е. сначала склеиваются первые два слова, потом результат с третьим, и так далее).

Напишите программу, которая поможет культивировать это развлечение.

## [Задача I](solutions/I_1.cpp)
— Шрек, ты чего?

— Не могу поверить, что я скоро стану отцом. Как это получилось?

Шрек и Фиона не могут неделями успокоить своих шебутных детей. Компьютерные игры еще не придумали, а бабушка с дедушкой вечно заняты, поэтому нашим героям приходится раздавать своих детей знакомым на выходные, чтобы хотя бы немного отдохнуть от суеты.

Больше всего маленькие огры любят проводить время с Волшебным Зеркалом. Зеркало примечательно тем, что люди, огры и другие обитатели 3-ки в нем не отражаются. Дети расставляют кубики в ряд и ползают вдоль него, таким образом, что всегда видят перед собой
N
N цветных кубиков, но не знают, какие из этих кубиков настоящие, а какие - всего лишь отражение в зеркале.
Be patient - дети огров, выросшие на болоте, не самые сообразительные в мире дети. Помогите им! Выясните, сколько кубиков может быть в комнате с Волшебным Зеркалом.
Дети видят отражение всех кубиков в зеркале и часть кубиков, которая находится перед ними. 

## [Задача J](solutions/J_1.cpp)
Осел и молодая чета огров едут в тридевятое царство. Хотя впереди еще половина пути,
Осел уже изрядно всех достал поэтому Фиона предлагает ему игру: она загадывает Ослу слово,
а тот пытается придумать из него другие слова. Фиона считает слово T неинтересным,
если его можно составить из префиксов загаданного слова S. Шрек в бешенстве,
что у Осла никак не получается придумать интересное Фионе слово и
продолжить поездку в тишине и просит вас помочь своему другу. 

## [Задача K](solutions/K_1.cpp)
Реализуйте структуру «множество строк», поддерживающие добавление (+) и поиск (?) элементов в множестве.
Каждая строка, подаваемая на вход программе, содержит команду (+ или ?) и строку, длина каждой строки не превосходит 105.
При добавлении НЕ гарантируется, что строка ещё не содержится в множестве. Ввод завершается символом «#».
На каждый запрос «?» выведите «YES», если строка содержится в множестве и «NO» иначе.

## [Задача L](solutions/L_1.cpp)
В стандартном потоке ввода программе подаётся строка, состоящая из строчных латинских букв,
которую мы назовём исходной. На следующей строке программе подаётся число N, а в следующих
N строках — по уникальному слову из строчных латинских букв;
эти слова мы назовём словарём.
Программа должна вывести на стандартный поток вывода N строк. В i-ой строке программа должна
вывести несколько чисел: первое число - количество вхождений строки
i из словаря в исходную строку, затем через пробел для каждого вхождения
выведите индексы начал всех вхождений этой строки в исходную в отсортированном порядке.
Индексы всех строк начинаются с единиц.


## [Задача M](solutions/M_1.cpp)
— Значит, план такой - бесцельно бродить по этой вонючей дыре, пока не сгнием?

— Нет, мы проникнем внутрь и разузнаем о планах Чаминга.

Слепые мыши решили наладить контрразведку в королевстве — ходят слухи, что принц Чарминг собирает вокруг себя злодеев, убеждая их бороться за своё «долго и счастливо». Для их выявления мышиный триумвират придумал задание-проверку: каждому агенту было поручено выяснить хотя бы часть секретного пароля от секретного сундука, в котором хранится имя наследника короля Гарольда. Позже эти данные планировалось проанализировать и выявить агентов Чарминга. Само командование, конечно, секретный пароль знает целиком.

Первая часть прошла без происшествий, все агенты сообщили в штаб найденные части пароля и индексы-границы, в которых эта часть лежит (границы могут быть неточны, но найденная часть определенно лежит в них, если агент хороший).

Теперь самое интересное: почему Вас посвятили в столь секретные материалы? Дело в том, что именно к Вам командование обратилось с просьбой выявить двойных агентов, проанализировав правильный пароль и отчёты всех агентов (по очевидным причинам, слепые мыши на это не способны). Проверка довольно проста: допустим, агент сообщил в штаб индексы-границы
l и
r и строку <str>, а правильный пароль --- это строка <password>, если <str> --- подстрока строки <password>[
l:r] (включая обе границы), то агент хороший и его отпускают, если нет, его ждёт особая беседа с Пиноккио. Помогите командованию сохранить тайну его Величества.

## [Задача N](solutions/N_1.cpp)
Построить суффиксный автомат для заданной строки s является обязательной в этом году.

## [Задача O](solutions/O_1.cpp)
Капитан Крюк решил завязать с пиратским прошлым и заняться цветочным бизнесом. Но с таким неймингом бизнес не построишь, поэтому капитан решил придумать себе новое имя. Процесс происходит следующим образом. От оператора вычислительной машины поступает
q команд к пустой строке
s двух возможных типов:

Команда добавить букву в конец строки
s дается сочетанием "+ b", где
b – буква, дописываемая вычислительной машиной в конец строки s.

Т.к. имя капитана должно быть уникально, чтобы бывшего пирата нельзя было обвинить в плагиате и отсутствии воображения, требуется передавать команду о проверке суффикса строки
s
s на неповторимость. Формат команды имеет вид "? k", где k – длина суффикса текущей строки
s, который требуется проверить на уникальность. Суффикс считается таким, если он встречается в строке
s в качестве подстроки ровно один раз (начиная с позиции
∣
s
∣
−
k
∣s∣−k).


После каждого запроса типа 2, оператор хочет видеть в выводе "+", если заданный суффикс уникален, или "
−" в ином случае.



## [Задача P](solutions/P_1.cpp)
Дана строка. Для каждого ее префикса найдите количество ее различных подстрок.

## [Задача R](solutions/R_1.cpp)
"Здорово, кекс! Разжигай все свои печи, у нас большой заказ!"

Пряня и Шрек хотят сорвать свадьбу и размещают заказ на пряничных гигантов в лавке знакомого булочника. Заказ срочный, времени придумывать имена нет, поэтому каждому прянику присваивается отдельный инвентарный номер. Проблема в одном — любовь любовью, но нельзя же позволять рушить свой бизнес собственными руками, а значит булочник не должен перепутать партии пряников, изготовленные на заказ для населения разных городов и отличающиеся только инвентарными номерами. Значит инвентарные номера и коды партий не должны пересекаться. В общем, схема, как с телефонными кодами. Например, один город может заказать партию под кодом 803, а другой — 8030, тогда все пряники с индексами, начинающиеся на 8030 (при условии, что не существует больше города с кодом, имеюшим такой префикс) будут отправлены во второй город, а номера, начинающиеся с 8031, 8032, …, 8039 (при том же условии) — в первый город. Помогите булочнику понять, сколько пряников он может отправить в каждый город.

## [Задача S](solutions/S_1.cpp)
Даже в постмодернистских сказках уважают людей, добившихся многого на почве вечных жанров. Это история самого хитрого из них.

Старый торговец арбузами Рабинович заработал уже очень много денег, пользуясь своей, без преувеличения, гениальной схемой, но тут ему в голову пришла ещё одна: арбузная лотерея. Рабинович за определенную плату выдаёт каждому желающему лотерейный билетик, участники пишут на своих билетиках некоторые
K-значные числа (возможно, с ведущими нулями), после чего выбирается билет-победитель. Каждый участник выигрывает тем больше арбузов, чем больше первых цифр билета-победителя он угадал в своей записи. Однако Рабинович не был бы Рабиновичем, если бы лотерея была честной, поэтому он отдаёт участнику билет только после того, как тот напишет на нём число. Таким образом, Рабинович знает все числа, написанные участниками, и просит Вас помочь (за три арбуза и немного баллов за семестр) выбрать такой билет-победитель, чтобы пришлось отдать как можно меньше абрузов.

## [Задача U](solutions/U_1.cpp)
"Мы из профсоюза работников белой и черной магии. Разве вы не чувствуете, что тут ущемляют ваши права?"

Хиханьки-хахоньки закончились и, став королем, Шрек круто взялся за борьбу за права фабричных рабочих. Шутка ли, но даже в условном Средневековье люди ненавидят бумажную отчетность и отсутствие страховых выплат. Первоочередная задача проста — создать перепись фабричных рабочих. К сожалению, на фабрике Феи-крестной находится лишь одна печатная машина, использующая movable-type printing. Для её работы каждое слово, которое планируется напечатать, сначала собирается из металлических кусочков, каждый кусочек содержит одну букву, потом эти кусочки одновременно вдавливаются в бумагу, в итоге на листе печатается одно слово. Печатная машинка позволяет выполнять над собой следующие операции:


Добавить букву в конец слова, которое в данный момент составлено на принтере.

Удалить последнюю букву из слова на принтере.

Напечатать слово, составленное на принтере.

Изначально на печатной машинке пустое слово, в конце можно оставить непустое, чтобы напакостить другим пользователям (ака внести свой вклад в борьбу с монополией). Вам выдают список фамилий, все фамилии записаны с маленькой буквы, длина каждой фамилии не превосходит 20 символов. Выполнение каждой из трёх операций занимает одну секунду, Вам нужно составить порядок операций, выполнение которого занимает минимальное время и печатает все поданные на вход фамилии (в любом порядке).

## [Задача V](solutions/V_1.cpp)
Постройте суффиксное дерево для заданной строки
s.

## [Задача X](solutions/X_1.cpp)
Ослу и Коту в сапогах нужно держать ритм песни, а значит, прежде всего, следует определить ее рефрен (так называется определённый музыкальный материал, неоднократно повторяющийся на протяжении произведения, например, припев в песнях).В общих чертах методика поиска рефрена интуитивна — рассматривается последовательность
n целых чисел от
1 до
m. Подпоследовательность подряд идущих чисел называется рефреном, если произведение её длины на количество вхождений в последовательность максимально.

От вас требуется две вещи:

1) По заданной последовательности найти её рефрен.

2) Оценить дуэт Осла и Кота в сапогах в примечании.

## Контест 2. Графы.

## [Задача A](solutions/A_2.cpp)
Вам дан неориентированный граф. Найдите кратчайший путь от вершины a до вершины b.

## [Задача B](solutions/B_2.cpp)
Во время контрольной работы профессор Флойд заметил, что некоторые студенты обмениваются записками. Сначала он хотел поставить им всем двойки, но в тот день профессор был добрым, а потому решил разделить студентов на две группы: списывающих и дающих списывать, и поставить двойки только первым.

У профессора записаны все пары студентов, обменявшихся записками. Требуется определить, сможет ли он разделить студентов на две группы так, чтобы любой обмен записками осуществлялся от студента одной группы студенту другой группы.


## [Задача C](solutions/C_2.cpp)
На шахматной доске N × N в клетке (x1, y1) стоит голодный шахматный конь. Он хочет попасть в клетку (x2, y2), где растет вкусная шахматная трава. Какое наименьшее количество ходов он должен для этого сделать?

## [Задача D](solutions/D_2.cpp)
Витя хочет придумать новую игру с числами. В этой игре от игроков требуется преобразовывать четырехзначные числа не содержащие нулей при помощи следующего разрешенного набора действий:

Можно увеличить первую цифру числа на 1, если она не равна 9.

Можно уменьшить последнюю цифру на 1, если она не равна 1.

Можно циклически сдвинуть все цифры на одну вправо.

Можно циклически сдвинуть все цифры на одну влево.

## [Задача E](solutions/E_2.cpp)
В славном городе Нью-Йорке в не менее славном районе Манхэттен на некоторых перекрестках установлены рестораны сети Subway. Также в этом районе на каждом перекрестке установлены офисные здания.

Для упрощения дел, будем считать Манхэттен районом, где все дороги идут перпендикулярно, а сам он имеет вид прямоугольника размера N × M перекрестков. Расстояние между клетками с координатами (x1, y1), (x2, y2) равно числу участков дорог, которые надо проехать (или |x1 - x2| + |y1 - y2|).

Нужно по расположению ресторанов Subway узнать для каждого перекрестка минимальное расстояние от него до одного из ресторанов. Гарантируется, что хотя бы один ресторан имеется в Манхэттене.


## [Задача F](solutions/F_2.cpp)
На день рождения юному технику Мише подарили машинку с радиоуправлением. Мише быстро наскучило гонять машинку туда-сюда по комнате, и он соорудил специальную трассу. Для этого он разбил комнату на квадратные ячейки, некоторые из них оставив пустыми, а в некоторые поставив препятствия. Целую неделю Миша каждый день улучшал свой рекорд по прохождению трассы. Но каково же было разочарование Миши, когда к нему в гости пришел Тима со своей машинкой и побил его рекорд. Стало понятно, что машинку необходимо модернизировать.

На пробных испытаниях, которые были произведены через день, Миша обнаружил, что машинка действительно ездит лучше, однако ее поведение несколько изменилось. На пульте теперь функционируют только четыре кнопки: вперед, назад, вправо, влево. При нажатии на них машинка едет по направлению к соответствующей стене комнаты, являющейся одновременно границей трассы, точно перпендикулярно ей. Машинка разгоняется до такой скорости, что перестает реагировать на другие команды, врезается в ближайшее препятствие или стену и отскакивает от нее на половину пройденного расстояния, то есть если между машинкой и стеной было x пустых клеток, то после отскока она остановится на клетке, от которой x // 2 клеток до стены.

Теперь Мише интересно, какое минимальное количество раз необходимо нажать на кнопку пульта, чтобы машинка, начав в клетке старта, остановилась в клетке финиша.

## [Задача G](solutions/G_2.cpp)
Дан ориентированный взвешенный граф. Найдите кратчайшее расстояние от одной заданной вершины до другой.

## [Задача H](solutions/H_2.cpp)
В столице одной небольшой страны очень сложная ситуация. Многокилометровые пробки буквально парализовали движение в городе, и власти на многих улицах ввели одностороннее движение, не анализируя, можно ли будет теперь проехать из любого места в городе в любое другое, не нарушая правила. Транспортная система столицы представляет собой N площадей, соединенных M полосами для движения, в том числе круговыми полосами, проходящими по площади. Каждая полоса предназначена для движения только в одну определенную сторону. При этом на магистралях есть полосы, направленные как в одну, так и в другую сторону. По круговой полосе можно двигаться только внутри площади и только против часовой стрелки.

Власти города на каждой полосе разместили видеокамеру, поэтому если Иннокентий едет по встречной полосе (при ее наличии) или, в случае одностороннего движения, в сторону противоположную предписанной знаками, то после поездки против правил по каждой из полос ему придется заплатить штраф в размере одной тысячи тугриков этой страны.

Иннокентий, который торопится купить кафельную плитку со скидкой, решился доехать до магазина в любом случае, даже если для этого придется нарушать правила. Но он хочет выбрать такой маршрут движения, суммарный штраф на котором минимален.

Иннокентий еще не решил, откуда именно и в какой магазин он собирается ехать, поэтому ему необходимо ответить на несколько вопросов вида «Какой минимальный штраф надо заплатить, чтобы добраться из пункта A в пункт B?». Отвечая на потребности жителей столицы, известная поисковая система Индекс разрабатывает соответствующий сервис.

Так как многие из вас рано или поздно будут проходить собеседование на работу в эту фирму, продемонстрируйте, что вы тоже умеете решать эту задачу.

## [Задача I](solutions/I_2.cpp)
Дан ориентированный невзвешенный граф. Необходимо определить есть ли в нём циклы, и если есть, то вывести любой из них.

## [Задача J](solutions/J_2.cpp)
У Васи есть N свинок-копилок, свинки занумерованы числами от 1 до N. Каждая копилка может быть открыта единственным соответствующим ей ключом или разбита.

Вася положил ключи в некоторые из копилок (он помнит, какой ключ лежит в какой из копилок). Теперь Вася собрался купить машину, а для этого ему нужно достать деньги из всех копилок. При этом он хочет разбить как можно меньшее количество копилок (ведь ему еще нужно копить деньги на квартиру, дачу, вертолет...). Помогите Васе определить, какое минимальное количество копилок нужно разбить.


## [Задача K](solutions/K_2.cpp)
Вам нужно распространить новость о посвяте среди всех первокурсников. Известно, что первокурсники общаются друг с другом через чаты, при этом если новость вброшена в чат, то гарантируется что все его участники прочтут новость (эх, было бы так не только в условии этой задачи).

Так как у вас уже и так очень много своих чатов, вы хотите вступить в как можно меньшее их количество, чтобы все первокурсники узнали, что посвят уже скоро. При этом вам неизвестны составы чатов, но до вас дошли сведения, что некоторые пары первокурсников гарантированно сидят в одном чате. Более того, если студент сидит в чате и видит новость, то он пересылает сообщение с важной информации во все остальные чаты, где он есть.

## [Задача L](solutions/L_2.cpp)
Дан ориентированный невзвешенный граф. Необходимо его топологически отсортировать.


## [Задача M](solutions/M_2.cpp)
Даны N точек, занумерованных числами от 1 до N. От каждой точки с меньшим номером к каждой точке с большим номером ведет стрелка красного или синего цвета. Раскраска стрелок называется однотонной, если нет двух таких точек A и B, что от A до B можно добраться как только по красным стрелкам, так и только по синим.

Ваша задача — по заданной раскраске определить, является ли она однотонной.

## [Задача N](solutions/N_2.cpp)
Вам задан ориентированный граф с N вершинами и M ребрами (1 ≤ N ≤ 20000, 1 ≤ M ≤ 200000). Найдите компоненты сильной связности заданного графа и топологически отсортируйте его конденсацию.



## [Задача O](solutions/O_2.cpp)
Найдите точки сочленения в неориентированном графе.

## [Задача P](solutions/P_2.cpp)
Дан неориентированный (быть может несвязный) граф. Требуется найти все мосты в нем.

## [Задача Q](solutions/Q_2.cpp)
Город будущего застроен небоскребами, для передвижения между которыми и парковки транспорта многие тройки небоскребов соединены треугольной подушкой из однополярных магнитов. Каждая подушка соединяет ровно 3 небоскреба и вид сверху на нее представляет собой треугольник, с вершинами в небоскребах. Это позволяет беспрепятственно передвигаться между соответствующими небоскребами. Подушки можно делать на разных уровнях, поэтому один небоскреб может быть соединен различными подушками с парами других, причем два небоскреба могут соединять несколько подушек (как с разными третьими небоскребами, так и с одинаковым). Например, возможны две подушки на разных уровнях между небоскребами 1, 2 и 3, и, кроме того, магнитная подушка между 1, 2, 5.

Система магнитных подушек организована так, что с их помощью можно добираться от одного небоскреба, до любого другого в этом городе (с одной подушки на другую можно перемещаться внутри небоскреба), но поддержание каждой из них требует больших затрат энергии.

Требуется написать программу, которая определит, какие из магнитных подушек нельзя удалять из подушечной системы города, так как удаление даже только этой подушки может привести к тому, что найдутся небоскребы из которых теперь нельзя добраться до некоторых других небоскребов, и жителям станет очень грустно.



## [Задача R](solutions/R_2.cpp)
В городе, построенном во времена средневековья, ширина улиц стала препятствовать движению транспорта, которое изначально было двусторонним по каждой из улиц. Для решения этой проблемы было предложено сделать движение по каждой из улиц односторонним. Мэр поручил эту задачу своему первому заму. После долгих размышлений тот доложил, что на некоторых улицах движение придется оставить двусторонним, в противном случае будет невозможно проехать из любого места в городе в любое другое. По данной схеме города требуется найти все такие улицы.

## [Задача S](solutions/S_2.cpp)
Для решения транспортной проблемы в некотором городе до недавнего времени использовались N автобусных маршрутов. Каждый маршрут начинался на одной из M площадей и там же заканчивался. В процессе проезда по маршруту автобус мог несколько раз проезжать одну и ту же площадь, и даже мог проезжать более одного раза по одной и той же улице в одном и том же направлении. В определенный момент местные власти решили сократить количество автобусных маршрутов в городе до одного. По их мнению, должен был остаться лишь один маршрут, который проходил бы по всем улицам, по которым раньше проходили автобусные маршруты, причем в том же направлении (но не обязательно в том же порядке). Если по каким-либо улицам автобусы ездили в обоих направлениях, то и новый маршрут должен проходить по этим улицам в обоих направлениях. По тем улицам и в тех направлениях, по которым раньше автобусы не ездили, новый маршрут проходить не должен. Однако так как контролеров увольнять нельзя, власти решили, что по каждой улице в каждом направлении новый маршрут должен проходить столько раз, сколько по ней проходили все старые маршруты, вместе взятые. Требуется написать программу, которая для заданных исходных данных определяет требуемый местным властям автобусный маршрут.

## [Задача T](solutions/T_2.cpp)
Дан ориентированный взвешенный граф. Найдите кратчайшее расстояние от одной заданной вершины до другой.

## [Задача U](solutions/U_2.cpp)
Вселенная состоит из планет, между некоторыми есть подходящие для гиперпрыжков гипертоннели (они двусторонние). В ходе битвы с Империей повстанцы выяснили, что Империя может уничтожать некоторые гипертоннели, например, взрывая внутри них астероиды, от чьих обломков нельзя увернуться на таких скоростях.

Повстанцы знают, что в ходе их атаки Звезде Смерти хватит времени ровно на одно уничтожение гипертоннеля. Поэтому они хотят построить некоторые гипертоннели, чтобы сеть осталась все еще связной после удара Звезды Смерти. Ваша задача — узнать, сколько их надо построить.

Учитывая то, что система гипертоннелей оптимальна, в ней нет бессмысленных кратных ребер и петель.


## [Задача W](solutions/W_2.cpp)
Если вы дочитали до сюда, то алканы — углеводороды, то есть соединения, состоящие из атомов углерода и водорода, не содержащие связей водород–водород, причём каждый углерод соединен ровно с четырьмя другими атомами, а каждый водород соединен ровно с одним другим атомом. При этом алкан является связным соединением, а также молекула алкана не является цикличной (для каждых двух атомов существует единственный способ добраться из одного в другой по связям между атомами).

Задание такое же простое как и условие - по данной молекуле определить, является ли она алканом.

## [Задача X](solutions/X_2.cpp)
Карту местности условно разбили на квадраты, и посчитали среднюю высоту над уровнем моря для каждого квадрата.

Когда идет дождь, вода равномерно выпадает на все квадраты. Если один из четырех соседних с данным квадратом квадратов имеет меньшую высоту над уровнем моря, то вода с текущего квадрата стекает туда (и, если есть возможность, то дальше), если же все соседние квадраты имеют большую высоту, то вода скапливается в этом квадрате.

Разрешается в некоторых квадратах построить водостоки. Когда на каком-то квадрате строят водосток, то вся вода, которая раньше скапливалась в этом квадрате, будет утекать в водосток.

Если есть группа квадратов, имеющих одинаковую высоту и образующих связную область, то если хотя бы рядом с одним из этих квадратов есть квадрат, имеющий меньшую высоту, то вся вода утекает туда, если же такого квадрата нет, то вода стоит во всех этих квадратах. При этом достаточно построить водосток в любом из этих квадратов, и вся вода с них будет утекать в этот водосток.

Требуется определить, какое минимальное количество водостоков нужно построить, чтобы после дождя вся вода утекала в водостоки.



## [Задача Y](solutions/Y_2.cpp)
В Физтех-школе Прикладной Математики и Информатики студенты изучают теорию графов. К сожалению, студент Демид не очень хорош в ней с математической точки зрения, но знает огромное множество алгоритмов в этой области. Поэтому многие теоремы он доказывает результатами работы некоторого алгоритма и их последующей обработкой. Но однажды ему задали непосильную задачу, помочь решить которую он просит вас. Перейдем к самой задаче.

Дан неориентированный связный граф без петель и кратных ребер на N вершинах, которые занумеровали от 1 до N. Затем на каждое ребро выписали сумму номеров вершин, которое оно соединяет, а изначальную нумерацию вершин стерли.

Для удобства работы с графом, вершины уже занумеровали от 1 до N каким-то образом, то есть формально надо найти такую перестановку p[], что если p[i] = k, то i-я вершина во входных данных имела номер k в исходном графе.


## Контест 3. Графы.

## [Задача A](solutions/A_3.cpp)
Одно разбросанное на островах Океании государство решило создать сеть автомобильных дорог (вернее, мостов). По каждому мосту можно перемещаться в обе стороны. Был разработан план очередности строительства мостов и известно, что после постройки всех мостов можно будет проехать по ним с каждого острова на каждый (возможно, через некоторые промежуточные острова).

Однако, этот момент может наступить до того, как будут построены все мосты. Ваша задача состоит в определении такого минимального количества мостов, после постройки которого (в порядке строительства по плану) можно будет попасть с любого острова на любой другой.



## [Задача B](solutions/B_3.cpp)
В неориентированный взвешенный граф добавляют ребра. Напишите программу, которая в некоторые моменты находит сумму весов ребер в компоненте связности.

## [Задача C](solutions/C_3.cpp)
Требуется найти в связном графе остовное дерево минимального веса. Задачу решайте с помощью алгоритма Прима

## [Задача D](solutions/D_3.cpp)
Дан связный неориентированный граф, в котором надо найти остовное дерево минимального веса с помощью алгоритма Краскала. Гарантируется, что ребра будут отсортированы по весу по неубыванию.


## [Задача E](solutions/E_3.cpp)
Дан связный неориентированный граф, в котором надо найти остовное дерево минимального веса с помощью алгоритма Борувки.

## [Задача F](solutions/F_3.cpp)
Вы — глава агенства, в котором работает N сотрудников — шпионы с кодовыми номерами от 1 до N. Шпионы были посланы в различные страны и получили кусочки важной информации. Ваша задача состоит в следующем:

Организовать встречи между некоторыми шпионами. На каждой такой встрече ровно два шпиона оказываются в одном месте и обмениваются всей информацией, которую получили сами или узнали от других шпионов на предыдущих встречах. Каждую из возможных встреч сложно и затратно организовать, поэтому вам известны все стоимости.

После того, как все встречи состоялись, выбирается группа шпионов, и они посылаются на задание по спасению мира. Для каждого шпиона известно, сколько денег он изведет, если его включить в эту группу. Задание должно быть выполнено, поэтому очень важно, чтобы выбранные шпионы все вместе обладали всей информацией, полученной агенством.

Найдите минимальную цену, за которую можно спасти мир.


## [Задача H](solutions/H_3.cpp)
Профессору Форду необходимо попасть на международную конференцию. Он хочет потратить на дорогу наименьшее количество денег, поэтому решил, что будет путешествовать исключительно ночными авиарейсами (чтобы не тратиться на ночевку в отелях), а днем будет осматривать достопримечательности тех городов, через которые он будет проезжать транзитом. Он внимательно изучил расписание авиаперелетов и составил набор подходящих авиарейсов, выяснив, что перелеты на выбранных направлениях совершаются каждую ночь и за одну ночь он не сможет совершить два перелета.

Теперь профессор хочет найти путь наименьшей стоимости, учитывая что до конференции осталось K ночей (то есть профессор может совершить не более K перелетов).

## [Задача J](solutions/J_3.cpp)
Дан ориентированный граф, рёбрам которого приписаны некоторые неотрицательные веса (длины). Найти длину кратчайшего пути из вершины s в вершину t.


## [Задача L](solutions/L_3.cpp)
Урбанист Варлам Ильинов каждый день катается на своем велосипеде по городу, оценивая качество велосипедных дорог, а также доступность его любимых кофеен. За годы своих трудов он смог составить подробную карту каждого района и выяснить за какое время он сможет добраться от одной кофейни до другой. Кроме того, если от одной кофейни до другой есть трамвайная линия, то он впадает в неистовый восторг и считает, что время на этом пути не тратится, а наоборот приобретается.

Теперь он хочет измерить удобность транспортной инфраструктуры. Чем меньше максимальное расстояние между кофейнями, тем более удобным считается город. При этом, если от одной кофейни нельзя добраться до другой ни по велосипедным дорожкам, ни с помощью трамвая, то такая (упорядоченная) пара игнорируется при подсчете удобности.

Необходимо найти пару кофеен, кратчайшее расстояние от одной из которых до другой максимально среди всех пар, между которыми есть какой-либо путь.

## [Задача M](solutions/M_3.cpp)
Полный ориентированный взвешенный граф задан матрицей смежности. Постройте матрицу кратчайших путей между его вершинами. Гарантируется, что в графе нет циклов отрицательного веса.


## [Задача N](solutions/N_3.cpp)
Задан ориентированный граф, каждое ребро которого обладает целочисленной пропускной способностью. Найдите максимальный поток из вершины с номером 1 в вершину с номером n.

В этой задаче необходимо реализовать алгоритм Форда-Фалкерсона.

## [Задача 0](solutions/O_3.cpp)
Задан ориентированный граф, каждое ребро которого обладает целочисленной пропускной способностью. Найдите максимальный поток из вершины с номером 1 в вершину с номером n.

В этой задаче необходимо реализовать алгоритм Эдмондса-Карпа.

## [Задача P](solutions/P_3.cpp)
Вася и Сережа играют в следующую игру. В некоторых клетках клетчатого листка Сережа рисует один из символов H, O, N или C, после чего Вася должен провести между некоторыми находящимися в соседних клетках символами линии так, чтобы получилось корректное изображение химической молекулы. К сожалению, Сережа любит рисовать много символов, и Вася не может сразу определить, возможно ли вообще нарисовать линии нужным способом. Помогите ему написать программу, которая даст ответ на этот вопрос.

В этой задаче проведенные между символами химических элементов линии будем считать корректным изображением молекулы, если они удовлетворяют следующим условиям:

каждая линия соединяет символы, нарисованные в соседних (по стороне) клетках;

между каждой парой символов проведено не более одной линии;

от каждого элемента отходит ровно столько линий, какова валентность этого элемента (1 для H, 2 для O, 3 для N, 4 для C);

пустые клетки ни с чем не соединены;

хотя бы в одной клетке нарисован какой-то символ.

## [Задача Q](solutions/Q_3.cpp)
Задан ориентированный граф, каждое ребро которого обладает целочисленной пропускной способностью. Найдите максимальный поток из вершины с номером 1 в вершину с номером n.

В этой задаче необходимо реализовать алгоритм Диница.

## [Задача R](solutions/R_3.cpp)
Поможем Джоан Роулинг развить сюжетную дыру, связанную с маховиками времени. После битвы с тем-кого-нельзя-называть магия вышла на качественно новый уровень. Теперь маховики времени способны не только переносить назад во времени, но и в принципе перемещаться в любую заданную точку мира в любой заданный момент времени. В связи с тем, что это могло бы вызвать хаос, Министерство Магии решило наложить некоторые ограничения на них.

А именно, есть N магических станций, в которых возможно использование маховиков, при этом любая телепортация может совершаться только в один из этих пунктов. При этом для телепортаций есть определенное расписание. Можно сравнить это с магловскими авиаперелетами, только время работает на руку волшебникам.

Легенда закончена, теперь сама задача. В момент времени 0 вы находитесь в магической станции A. Вам дано расписание рейсов. Требуется оказаться в магической станции B как можно раньше (то есть в наименьший возможный момент времени).

При этом разрешается делать сложные маршруты, использующие несколько магических станций. Если вы прибываете на некоторую станцию в момент времени T, то вы можете телепортироваться из него любым рейсом, который отправляется из этой станции в момент времени T или позднее (но не раньше).

## [Задача T](solutions/T_3.cpp)
В этой задаче вы являетесь членом экипажа космического корабля в популярной игре Among Us. К сожалению, на корабле был запущен вирус, и теперь вам нужно добраться до медицинской комнаты в вершине t, чтобы найти лекарство.

Корабль представлен положительно взвешенным неориентированным графом, и вы начинаете в вершине s. Однако, на корабле есть k источников вируса, которые могут блокировать некоторые ребра в графе. Вес ребра равен времени, необходимому для заражения ребра.

Ваша скорость равна скорости распространения вируса, что означает, что вы можете двигаться так быстро, как и распространяется вирус. Сможете ли вы найти лекарство для вируса и спасти корабль до того, как будет слишком поздно? Ваша цель — найти кратчайший путь до вершины t, избегая блокированных ребер, вызванных источниками воды, и зараженных областей на корабле.


## [Задача V](solutions/V_3.cpp)
Абитуриент Василий решил подать документы в ФПМИ. Так как Василий живёт достаточно далеко, он решил спланировать своё путешествие заранее.

В результате долгих размышлений он пришёл к выводу, что на дорогу у него есть не более T минут, так как приёмная комиссия скоро закроется. Бюджет будущего студента также ограничен, поэтому он хочет ещё и потратить на своё путешествие поменьше денег.

После ещё более долгих размышлений Василий составил карту из всех возможных путей с промежуточными пунктами (станции общественного транспорта или другие значимые для него объекты, до которых он гарантированно может добраться из дома). Карта представляет собой список из N пунктов, где дом Василия — это пункт с номером 1, а N -й пункт — приёмная комиссия. Между пунктами существует M переходов. Для каждого из них он написал стоимость Pi и время Ti. При этом гарантируется, что он всегда может добраться до приёмной комиссии.

Между любыми двумя пунктами в карте Василия имеется не более одного прямого перехода. Некоторые из переходов могут быть бесплатными или занимать пренебрежительно малое время. При этом любой переход двусторонний, то есть стоимость перехода и время не зависят от того, движется ли Василий из пункта с номером A в пункт с номером B, или в обратном направлении.

Помогите Василию найти минимальную стоимость маршрута, благодаря которому он сможет успеть подать документы и на который он потратит меньше всего денег.